---
title: Examples
jupyter: python3
format:
  html:
    toc: true
---


```{python}
from bigblock.widgets import BigblockWidget, embed_css
from bigblock.models import process_data, default_columns, Column, Props
from plotnine.data import penguins
import polars as pl

embed_css()

pl_penguins = pl.from_pandas(penguins)
```

## Basic usage

```{python}
BigblockWidget(
    props=dict(
        data={"a": [1, 2], "b": ["a", "b"], "c": ["c", "d"]},
        columns=[
            dict(name="colA", id="a", footer="footer", minWidth=50),
            dict(name="colB", id="b", width=120, minWidth=50),
            dict(name="colC", id="c"),
        ],
        # theme = asdict(Theme(color = "blue"))
    )
)

```


```{python}
BigblockWidget(
    props=dict(
        data=process_data(pl_penguins),
        columns=default_columns(pl_penguins),
    ),
)
```

### Column definitions


```{python}
# shouldn't subset columns
lil_penguins = process_data(pl_penguins.head())
BigblockWidget(
    props=Props(
        data=lil_penguins,
        columns=[
            Column(id="species", name="Species"),
            Column(id="island", name="Island"),
            Column(id="bill_length_mm", align="center"),
        ],
    ).to_props()
)
```

### Default columns

(NOTE: Added header)

* TODO: defaultColDef merged in on python side

```{python}
BigblockWidget(
    props=Props(
        lil_penguins,
        defaultColDef=Column(align="center"),
        columns=[Column(id="species", minWidth=140)],
        bordered=True,
        highlight=True,
    ).to_props()
)

```

## Sorting

### Default sorted columns

```{python}
# defaultSorted may be..
#  * dict mapping name -> order
#  * list of names
# for each col in default sorted:
# * set Column.defaultSortDesc (if not set already)
# *
BigblockWidget(
    props=Props(
        pl_penguins,
        defaultSorted=["species", "island"],
    ).to_props()
)
```

```{python}
# TODO: support defaultSorted being a dict?
BigblockWidget(
    props=Props(
        pl_penguins,
        columns=[Column(id="species", defaultSortOrder="desc")],
        defaultSorted=["species", "island"],
    ).to_props()
)
```

### Default sort order


```{python}
BigblockWidget(
    props=Props(
        pl_penguins,
        defaultSortOrder="desc",
        columns=[Column(id="species", defaultSortOrder="asc")],
        defaultSorted=["species", "island"],
    ).to_props()
)
```

### Sort missing values last

TODO(jupyter): Out of range float values are not JSON compliant

```{python}
import math

df = pl.DataFrame(
    {
        "n": [1, 2, 3, -math.inf, math.inf],
        "x": [2, 3, 1, None, math.nan],
        "y": ["aa", "cc", "bb", None, None],
    }
)

BigblockWidget(
    props=Props(
        df,
        defaultColDef=Column(sortNALast=True),
        defaultSorted="x",
    ).to_props()
)
```

### No sorting

```{python}
BigblockWidget(
    props=Props(
        pl_penguins.head(),
        sortable=False,
        showSortable=True,
        columns=[
            Column(id="bill_length_mm", sortable=True),
            Column(id="bill_depth_mm", sortable=True),
        ],
    ).to_props()
)
```


### Hide sort icons


```{python}
BigblockWidget(
    props=Props(
        pl_penguins.head(),
        showSortIcon=False,
    ).to_props()
)
```

## Filtering

```{python}
BigblockWidget(
    props=Props(
        pl_penguins,
        filterable=True,
        minRows=10,
    ).to_props()
)
```


```{python}
BigblockWidget(
    props=Props(
        pl_penguins,
        filterable=True,
        columns=[Column(id="Price", filterable=False)],
        defaultPageSize=5,
    ).to_props()
)
```

### Custom filtering


```{python}

```